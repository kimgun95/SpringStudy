# SpringStudy
---
## spring lv.1

1. 서비스 요구사항
   - 전체 게시글 목록 조회 API
     - title, content, author, created_at 조회
     - created_at 기준 내림차순 정렬
   - 선택한 게시글 조회 API
   - 게시글 작성 API
     - title, content, author, password 작성 후 저장
     - 저장한 게시글 client로 반환
   - 선택한 게시글 수정 API
     - 수정할 데이터와 password를 요청으로 보내면 서버에서 password 일치 여부 확인
     - 수정된 게시글 client로 반환
   - 선택한 게시글 삭제 API
     - password를 요청으로 보내면 서버에서 일치 여부 확인
     - 게시글 삭제 후 성공 여부 응답
2. 고민한 부분
    - 수정, 삭제 API request 방식(param, query, body)
      - body를 통해 데이터를 보내기 위해 `@RequestBody`를 이용했다.
      - `@PathVariable`를 활용해 게시글의 id 값을 넘겨주었다.
      - param, query 방식이 둘 다 같은 것으로 알고 있는데 해당 방식은 url에 값이 노출되기에 안전하지 않다고 생각했다.
    - 어떤 상황에서 어떤 방식의 request를 써야 하는지
      - `@RequestParam` : 페이징 및 검색 정보를 전달할 때 사용
      - `@RequestBody` : xml, json 기반 데이터 요청시 사용
      - `@PathVariable` : REST API에서 값 호출시 사용
    - RESTful한 API 설계를 했는지
      - 완벽하진 않겠지만 어느정도 REST API에 만족하는 설계를 한 것 같음
      - URI에 대한 가이드(혹은 규칙)를 잘 따르며 설계를 했다.
      - [REST Resource Naming Guide](https://restfulapi.net/resource-naming/)
      - [7 Rules for REST API URI Design](https://dzone.com/articles/7-rules-for-rest-api-uri-design-1)
    - 적절한 관심사 분리를 했는지(controller, service, repository)
      - MVC 패턴을 떠올리며 controller와 model 간의 역할을 구분지었다.

---
## spring lv.2
1. 서비스 요구사항
   - 회원 가입 API
     - username, password 를 전달 받아 회원 등록
     - username : 4~10자, 알파벳 소문자 및 숫자 조합
     - password : 8~15자, 알파벳 대소문자 및 숫자
     - DB 레코드에 중복된 username은 존재할 수 없다
   - 로그인 API
     - username, password 를 전달 받아 로그인
     - 로그인 검증이 성공적으로 끝나면 JWT 토큰을 발급
2. 고민한 부분
   - ERD를 설계한 후 Entity를 개발했을 때 장점
     - 도메인 간의 연관관계에 대해 생각한 후 쉽게 코드로 적용할 수 있었음
     - pk, fk에 대해 생각하게 됨
   - JWT를 사용한 인증/인가 구현의 장점
     - 서버의 부하를 줄일 수 있음
     - 유저가 악의적으로 수정하여 접근 시도시 서버의 비밀키로 유효성 검증을 하면 됨
   - 반대로 JWT를 사용한 인증/인가의 한계점
     - 동일 유저가 여러 기기로 해당 서버에 접근하는 경우 막을 수 없음
     - 세션처럼 유저의 모든 정보를 서버가 관리하지 않음
   - 만약 댓글 기능이 있는 블로그에서 게시글을 삭제한다면 어떤 문제가 발생할까? DB 관점에서의 해결방법?
     - 게시글의 댓글도 모두 삭제되어 문제가 발생할 수도 있음
     - cascading을 통해 연관된 댓글도 자동적으로 관리되게 할 수 있음
   - IoC와 DI에 대한 간략한 설명
     - DI : 의존하고 있는 어떠한 객체를 외부에서 선언하고 이를 주입 받아 사용하는 것
     - IoC : 프로그램의 흐름을 개발자가 아닌 프레임워크가 제한하는 것

---
## spring lv.3
1. 서비스 요구사항
   - 회원 가입 API
     - password : 특수문자 조합 추가
     - 회원 권한 부여하기 : ADMIN, USER
   - 댓글 API
     - 작성, 수정, 삭제
   - 예외 처리
     - 예상되는 예외에 대한 에러 처리 후 statusCode와 message를 반환
     - ex) 토큰이 유효하지 않을 때, 수적/삭제시 작성자가 아닐 때, 회원가입시 중복된 username 요청일 때, 로그인시 회원 정보를 찾을 수 없을 때
   - 게시글 API
     - 게시글 조회시 댓글도 함께 조회
2. 고민한 부분
    - ERD를 먼저 설계한 후 Entity를 개발했을 때 어떤 점이 도움이 되셨나요?
      - JPA 측면에서의 연관관계에 대해 한 번 더 고민하게 된다.
    - 댓글이 달려있는 게시글을 삭제하려고 할 때 무슨 문제가 발생할까요? JPA가 아닌 Database 테이블 관점에서 해결방법?
      - 게시글의 id를 fk로 갖는 댓글들을 찾아 삭제해야 한다.
    - 위와 같은 문제가 발생했을 때 JPA에서는 어떻게 해결할 수 있을까요?
      - cascading 기능을 사용한다.
      
---
## spring lv.4
1. 서비스 요구사항
    - Spring Security 적용하기
      - JWT 토큰 검사 및 인증하기
      - 기존 비즈니스 로직에서 JWT 검증 제거
2. 고민한 부분
   - Spring Security 적용 후 도움이 된 것
     - 스프링의 하위 프레임워크로서 개발자가 설정하지 않아도 기본적인 애플리케이션에 대한 보안을 책임져 준다.
   - IoC/DI 에 대해 간략한 설명
     - DI
       - spring 프레임워크가 지원하는 프로그래밍 모델
       - 외부에서 두 객체 간의 관계를 결정해주는 디자인 패턴
       - 인터페이스를 사이에 둬서 클래스 레벨에서는 의존관계가 고정되지 않도록 하고 런타임 시에 관계를 동적으로 주입하는 것
       - 이를 통해 유연성을 확보하고 결합도를 낮춘다.
     - IOC
       - '제어의 역전'이란 의미로, 메서드/객체의 호출 작업을 개발자가 아닌 외부에서 결정하는 것을 의미한다.
       - spring이 실행시 빈들을 생성하여 필요한 곳에 주입시켜줌으로써 제어의 흐름을 개발자가 아닌 스프링에게 맡겨 처리하게 된다.
   - JWT를 사용한 인증/인가 구현시 장점
     - stateless : 사용자의 인증 정보를 서버에서 유지하지 않고 클라이언트의 요청만으로 작업을 처리한다.
     - 보안성 : 쿠키 사용으로 인한 취약점이 사라진다. but 토큰 탈취에 대한 상황을 고려해야 한다.
     - 확장성(Extensibility) : 토큰에 선잭적인 권한만 부여하여 발급이 가능하다. OAuth 경우 소셜 계정을 이용하여 다른 웹서비스 로그인이 가능하다.
   - JWT를 사용한 인증/인가의 한계점
     - stateless : 토큰을 서버에서 관리/제어하지 않기 때문에 임의 삭제가 불가능하다. 꼭 만료 시간을 넣어줘야 한다.
     - payload 인코딩 : 페이로드는 BASE64Url로 인코딩 된 것으로 중간에 탈취하여 디코딩을 통해 데이터를 볼 수 있다. 중요 데이터를 넣지 않아야 한다.
     - store token : 클라이언트 측에서 저장/관리를 해야 한다.

---
## spring lv.5
1. 서비스 요구사항
   - 게시글/댓글 좋아요 API
     - 사용자가 이미 좋아요를 누른 후 다시 누른다면 좋아요 기록이 취소된다.
2. 고민한 부분
   - spring security를 사용하지 않는다면 어떻게 인증/인가를 효율적으로 처리할 수 있을까
     - 스프링 시큐리티 적용 전 처럼 jwt를 활용하거나 토큰, 세션을 통한 인증/인가를 구현해야 할 것 같음
   - AOP 란?
     - 관점 지향 프로그래밍(Aspect Oriented Programming)의 약자로, 관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어 본 뒤 관점을 기준으로 모듈화를 하겠다는 것
     - 모듈화는 어떤 공통된 로직이나 기능을 하나의 단위로 묶는 것을 의미
     - 예를 들어, 핵심적인 관점은 비즈니스 로직이 될 수 있고, 부가적인 관점은 핵심 로직을 실행을 통한 db 연결, 로깅, 파일 입출력 등이 될 수 있다.
   - refresh token 장단점
     - access token에 대한 관리를 어느 정도 할 수 있다는 장점
     - 서버가 부담을 갖는다는 단점
   - 즉시로딩과 지연로딩이란?
     - 조회한 데이터를 즉시 프록시에 담아 사용할 수 있는 것이 즉시로딩
     - 개발자가 데이터를 필요한 시점에 로드를 해 사용하는 것이 지연로딩
